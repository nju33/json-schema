{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "JSON schema for Slack chat.postMessage",
  "type": "object",
  "definitions": {
    "pattern": {
      "url": {
        "type": "string",
        "pattern": "^(http(s)?://)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$"
      }
    },
    "channel": {
      "description": "投稿先となるチャンネルID",
      "type": "string"
    },
    "text": {
      "description": "投稿内容",
      "type": "string"
    },
    "attachment": {
      "common": {
        "type": "object",
        "properties": {
          "fallback": {
            "description": "何らかの原因でボタンなどが表示できなかった場合の代わりのテキスト",
            "type": "string"
          },
          "color": {
            "description": "アタッチメントの左に付くボーダーカラー",
            "type": "string",
            "pattern": "^#([0-9a-fA-F]{3}){1,2}$"
          },
          "text": {
            "description": "アタッチメントのテキスト",
            "type": "string"
          },
          "pretext": {
            "description": "アッタチメントの上部のテキスト",
            "type": "string"
          },
          "author_name": {
            "description": "テキストの上部に小さいフォントサイズで標示されるテキスト",
            "type": "string"
          },
          "author_link": {
            "$ref": "#/definitions/pattern/url",
            "description": "`author_name`テキストのリンク"
          },
          "author_icon": {
            "$ref": "#/definitions/pattern/url",
            "description": "`author_name`テキストの前に付くアイコン画像のリンク"
          }
        },
        "dependencies": {
          "author_link": ["author_name"],
          "author_icon": ["author_name"]
        }
      }
    }
  },
  "properties": {
    "channel": {
      "$ref": "#/definitions/channel"
    },
    "text": {
      "$ref": "#/definitions/text"
    },
    "attachments": {
      "type": "array",
      "items": {
        "required": ["text"],
        "allOf": [
          {
            "$ref": "#/definitions/attachment/common"
          }
        ]
      }
    }
  }
}
